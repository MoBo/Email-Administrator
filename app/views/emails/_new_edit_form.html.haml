.email.edit.form
  = form_for @email do |e|
    = render 'shared/error_messages', object: e.object
    %p
      = label_tag(:email,  "Email prefix")
      = text_field_tag 'email[email]', (get_email_prefix(@email.email) if @email.email)
    %p
      = e.label :domain
      = select_tag 'email[domain_id]',  options_from_collection_for_select(@domains,"id","name",(@domain.id if @domain))

    %p
      = label_tag(:alt_email,  "Alternative Email")
      = e.text_field :alt_email
    .forward_email_field
      = label_tag(:forward_email,  "Forward email")
      - if @email.forward_email 
        - @email.forward_email.split.each_with_index do |f, i| 
          %p
            = text_field_tag "email[forward_email]["+ i.to_s + "]" , f
            = button_tag "Remove", :class => "remove_btn"
      - else
        = text_field_tag "email[forward_email][0]"
      = button_tag "Add new field", :class => "add_btn"
    %p
      = e.label :password
      = e.password_field :password
    %p
      = e.label :comment
      = e.text_field :comment
    %p
      = e.label :expires
      = e.text_field :expires
    %p
      = e.label :email_path_name
      = text_field_tag :email_path_name, (@email.email_path ? @email.email_path.path : "var/logs")

    %p
      = e.label :receive
      = e.check_box :receive
    %p
      = e.submit
    
  